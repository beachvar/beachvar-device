services:
  device:
    build: .
    command: python -O main.py
    env_file:
      - .env
    environment:
      # SSH config for web terminal (access to host)
      - SSH_HOST=localhost
      - SSH_USER=pi
      - SSH_PORT=22
    ports:
      - "8080:8080"   # Main HTTP server
      - "7682:7682"   # ttyd web terminal
    restart: unless-stopped
    # Use host network for SSH access to host machine
    network_mode: host
